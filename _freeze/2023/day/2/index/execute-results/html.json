{
  "hash": "e682f250118a7e249a0a6b13455ae609",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2023: Day 2 - Cube Conundrum\"\ndate: 2023-12-2\ncategories:\n  - R\ndraft: false\n---\n\n\n## Setup\n\n[The original challenge](https://adventofcode.com/2023/day/2)\n\n[My data](input){target=\"_blank\"}\n\nNotes:\n\n- There are three types of cubes: green, red, and blue.\n- Secret number of each type in a bag, have to figure out number.\n- We have \"sample data\" from the bag.\n- The input includes info (samples) from previous games.\n- Games are identified by an ID (e.g., Game 11).\n\nExample:\n\n```\nGame 1: 3 blue, 4 red; 1 red, 2 green, 6 blue; 2 green\nGame 2: 1 blue, 2 green; 3 green, 4 blue, 1 red; 1 green, 1 blue\nGame 3: 8 green, 6 blue, 20 red; 5 blue, 4 red, 13 green; 5 green, 1 red\nGame 4: 1 green, 3 red, 6 blue; 3 green, 6 red; 3 green, 15 blue, 14 red\nGame 5: 6 red, 1 blue, 3 green; 2 blue, 1 red, 2 green\n```\n\nIn Game 1, three sets of cubes are sampled from the bag (then returned). The first set contains 3 blue and 4 red cubes; the second set has 1 red cube, 2 green cubes, and 6 blue cubes; the third set consists solely of 2 green cubes.\n\nWhich games would have been possible if the bag had contained only 12 red cubes, 13 green cubes, and 14 blue cubes? Game 3 would have been impossible as it required 20 red cubes at one point.\n\nAfter filtering out the impossible games, we can sum their IDs (for instance, in this example, we would obtain a total of 8).\n\n## Part 1\n\n> Determine which games would have been possible if the bag had been loaded with only 12 red cubes, 13 green cubes, and 14 blue cubes. What is the sum of the IDs of those games?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\n\ninput <- read_file(here(\"2023/day/2/input\")) %>%\n  str_split_1(pattern = '\\n') %>%\n  magrittr::extract(1:100)\n\ninput[1:10]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Game 1: 8 green, 4 red, 4 blue; 1 green, 6 red, 4 blue; 7 red, 4 green, 1 blue; 2 blue, 8 red, 8 green\"                                                \n [2] \"Game 2: 11 green, 7 blue, 15 red; 13 red, 6 green, 2 blue; 7 green, 9 red, 10 blue; 5 blue, 1 red, 11 green; 4 blue, 18 green; 4 red, 8 blue, 18 green\"\n [3] \"Game 3: 7 red, 10 green, 4 blue; 2 blue, 3 green, 5 red; 9 red, 7 green, 3 blue; 3 blue, 6 green, 18 red\"                                              \n [4] \"Game 4: 1 blue, 2 green, 5 red; 10 red, 1 blue, 3 green; 14 red\"                                                                                       \n [5] \"Game 5: 16 red, 4 green, 19 blue; 13 blue, 9 red; 7 green, 14 red, 2 blue; 5 green, 18 blue, 4 red; 7 red, 2 blue, 3 green; 8 blue, 12 green\"          \n [6] \"Game 6: 3 blue, 8 green; 4 red, 5 green; 5 red, 8 blue, 5 green; 8 blue, 4 green; 3 red, 7 green, 2 blue\"                                              \n [7] \"Game 7: 7 red, 2 blue; 5 red, 6 green; 10 red; 2 blue, 12 red, 2 green; 4 red, 1 blue, 1 green; 9 green, 2 blue, 10 red\"                               \n [8] \"Game 8: 3 red, 7 green, 3 blue; 2 green, 3 blue, 3 red; 3 blue, 4 green, 1 red; 3 blue, 3 red; 2 blue, 6 green; 2 red, 7 green, 1 blue\"                \n [9] \"Game 9: 5 red, 6 green; 6 red; 2 blue, 3 green, 9 red; 6 green, 2 blue\"                                                                                \n[10] \"Game 10: 5 red, 8 blue, 5 green; 15 red, 6 green, 7 blue; 8 blue, 6 red, 5 green; 5 green, 2 blue; 12 red, 6 blue; 6 green, 16 red, 6 blue\"            \n```\n\n\n:::\n:::\n\n\nWhat is the most suitable data structure for solving this problem?\n\nI believe I need only this information:\n\n- The ID of the game.\n- The maximum number of cubes for each colour.\n\nRegarding the number of cubes: is the maximum alone sufficient?\n\nConsider there are 10 red cubes.\n\nIf the maximum is 10 or less, the game was possible.\nIf the maximum is 11 or more, the game was impossible.\n\nIndeed, I just need the maximum number of cubes for each colour in each game.\n\nI think a `tibble` would be a suitable data structure to store this information.\n\nLet's start with the first game:\n\n::: {.cell}\n\n```{.r .cell-code}\nfirst_game <- input[1]\nfirst_game\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Game 1: 8 green, 4 red, 4 blue; 1 green, 6 red, 4 blue; 7 red, 4 green, 1 blue; 2 blue, 8 red, 8 green\"\n```\n\n\n:::\n:::\n\n\nSpecial characters to handle:\n\n- `:`\n- `,`\n- `;\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngame_data <-\n  tibble(\n    input = input\n  ) %>%\n    separate(\n      input,\n      into = c(\"id\", \"data\"),\n      sep = \": \"\n    ) %>%\n    mutate(\n      id = as.integer(str_extract(id, \"\\\\d+\"))\n    )\n\ngame_data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 100 Ã— 2\n      id data                                                                   \n   <int> <chr>                                                                  \n 1     1 8 green, 4 red, 4 blue; 1 green, 6 red, 4 blue; 7 red, 4 green, 1 blueâ€¦\n 2     2 11 green, 7 blue, 15 red; 13 red, 6 green, 2 blue; 7 green, 9 red, 10 â€¦\n 3     3 7 red, 10 green, 4 blue; 2 blue, 3 green, 5 red; 9 red, 7 green, 3 bluâ€¦\n 4     4 1 blue, 2 green, 5 red; 10 red, 1 blue, 3 green; 14 red                \n 5     5 16 red, 4 green, 19 blue; 13 blue, 9 red; 7 green, 14 red, 2 blue; 5 gâ€¦\n 6     6 3 blue, 8 green; 4 red, 5 green; 5 red, 8 blue, 5 green; 8 blue, 4 greâ€¦\n 7     7 7 red, 2 blue; 5 red, 6 green; 10 red; 2 blue, 12 red, 2 green; 4 red,â€¦\n 8     8 3 red, 7 green, 3 blue; 2 green, 3 blue, 3 red; 3 blue, 4 green, 1 redâ€¦\n 9     9 5 red, 6 green; 6 red; 2 blue, 3 green, 9 red; 6 green, 2 blue         \n10    10 5 red, 8 blue, 5 green; 15 red, 6 green, 7 blue; 8 blue, 6 red, 5 greeâ€¦\n# â„¹ 90 more rows\n```\n\n\n:::\n:::\n\n\nI need to obtain the number of cubes that have appeared for each colour:\n\n::: {.cell}\n\n```{.r .cell-code}\ngame_data_1 <- game_data[[\"data\"]][[1]]\ngame_data_1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"8 green, 4 red, 4 blue; 1 green, 6 red, 4 blue; 7 red, 4 green, 1 blue; 2 blue, 8 red, 8 green\"\n```\n\n\n:::\n:::\n\n\nI think I can use `str_match_all` with a capturing pattern associated with the colours and simply ignore everything else.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_cubes_colour <- \n  str_match_all(\n    game_data_1,\n    \"(\\\\d+) ([red|green|blue]+)\"\n  )[[1]][,2:3]\n\ncolnames(n_cubes_colour) <- c(\"n\", \"colour\")\n\nn_cubes_colour %>%\n  as_tibble() %>%\n  group_by(colour) %>%\n  summarise(n = max(as.numeric(n)))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 Ã— 2\n  colour     n\n  <chr>  <dbl>\n1 blue       4\n2 green      8\n3 red        8\n```\n\n\n:::\n:::\n\n\nNow it's time to wrap the code above into a function and apply it to all the games:\n\n::: {.cell}\n\n```{.r .cell-code}\nget_count_cubes <-\n  function(x) {\n    matrix_count_cubes <-\n    str_match_all(\n      x,\n      \"(\\\\d+) ([red|green|blue]+)\"\n    )[[1]][,2:3]\n\n    colnames(matrix_count_cubes) <- c(\"n\", \"colour\")\n\n    matrix_count_cubes %>%\n      as_tibble() %>%\n      group_by(colour) %>%\n      summarise(n = max(as.numeric(n)))\n}\n```\n:::\n\n\n(I'm concerned this approach may not scale effectively if the input for the second part is significantly larger.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngame_data_tidy <- \n  game_data %>%\n  mutate(data = map(data, get_count_cubes)) %>%\n  unnest(data) %>%\n  pivot_wider(\n    id_cols = id,\n    names_from = colour,\n    values_from = n\n  )\n```\n:::\n\n\nMy attempted solution to *determine which games would have been possible if the bag had been loaded with only 12 red cubes, 13 green cubes, and 14 blue cubes. What is the sum of the IDs of those games?*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngame_data_tidy %>%\n  filter(red <= 12, green <= 13, blue <= 14) %>%\n  pull(id) %>%\n  sum()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2085\n```\n\n\n:::\n:::\n\n\nIT IS CORRECT!!! ðŸ¥³ðŸ¥³ðŸ¥³ðŸ¥³ \n\n## Part 2\n\n> In each game you played, what is the fewest number of cubes of each color that could have been in the bag to make the game possible?\n\n> The power of a set of cubes is equal to the numbers of red, green, and blue cubes multiplied together. The power of the minimum set of cubes in game 1 is 48. In games 2-5 it was 12, 1560, 630, and 36, respectively. Adding up these five powers produces the sum 2286.\n\n> For each game, find the minimum set of cubes that must have been present. What is the sum of the power of these sets?\n\nGiven the data structure I'm using, this second part seems easy.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngame_data_tidy %>%\n  summarise(sum(red*green*blue))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 Ã— 1\n  `sum(red * green * blue)`\n                      <dbl>\n1                     79315\n```\n\n\n:::\n:::\n\n\nIt is correct too!!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}